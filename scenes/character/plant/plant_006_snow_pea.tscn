[gd_scene load_steps=35 format=3 uid="uid://sj81m0cg30o8"]

[ext_resource type="PackedScene" uid="uid://c5cke4cm02um7" path="res://scenes/character/plant/plant_000_base.tscn" id="1_ntefj"]
[ext_resource type="Script" uid="uid://nmyv8senyky1" path="res://scripts/character/plant/plant_006_snow_pea.gd" id="2_6otjv"]
[ext_resource type="Script" uid="uid://bafp0ax1lmlge" path="res://scripts/character/components/detect_component/component_detect.gd" id="2_8jetj"]
[ext_resource type="Texture2D" uid="uid://cy3xu8ug3gd2" path="res://assets/reanim/PeaShooter_backleaf.png" id="2_askx4"]
[ext_resource type="Texture2D" uid="uid://cyknr5ymersct" path="res://assets/reanim/PeaShooter_backleaf_lefttip.png" id="3_6otjv"]
[ext_resource type="Script" uid="uid://d27ifln7bjwup" path="res://scripts/character/components/attack_behavior_component/component_attack_bullet_base.gd" id="3_4556a"]
[ext_resource type="Texture2D" uid="uid://i7fngqj5l36a" path="res://assets/reanim/PeaShooter_backleaf_righttip.png" id="4_a5mo6"]
[ext_resource type="Texture2D" uid="uid://yxv2bpco6d57" path="res://assets/reanim/PeaShooter_stalk_bottom.png" id="5_wtkom"]
[ext_resource type="Texture2D" uid="uid://bu8g84fe1ni48" path="res://assets/reanim/PeaShooter_stalk_top.png" id="6_58ts4"]
[ext_resource type="Texture2D" uid="uid://300aew7liup" path="res://assets/reanim/PeaShooter_frontleaf.png" id="7_5gv34"]
[ext_resource type="Texture2D" uid="uid://nj6m28m6k5p1" path="res://assets/reanim/PeaShooter_frontleaf_righttip.png" id="8_gq5lk"]
[ext_resource type="Texture2D" uid="uid://dit0i5evvco14" path="res://assets/reanim/PeaShooter_frontleaf_lefttip.png" id="9_a3ama"]
[ext_resource type="Texture2D" uid="uid://dvlvifhp7gqg6" path="res://assets/reanim/SnowPea_crystals1.png" id="10_t2k0g"]
[ext_resource type="Texture2D" uid="uid://cwt4uqjqsibcq" path="res://assets/reanim/SnowPea_crystals2.png" id="11_ljobm"]
[ext_resource type="Texture2D" uid="uid://djckbtre6csg1" path="res://assets/reanim/SnowPea_crystals3.png" id="12_bg0v7"]
[ext_resource type="Texture2D" uid="uid://btm8ff66rlov2" path="res://assets/reanim/SnowPea_head.png" id="13_j0iub"]
[ext_resource type="Texture2D" uid="uid://duih4ey3fvuom" path="res://assets/reanim/SnowPea_mouth.png" id="14_ncfxd"]
[ext_resource type="Texture2D" uid="uid://deyg0fepgpbq6" path="res://assets/reanim/SnowPea_blink1.png" id="15_t08fn"]
[ext_resource type="Script" uid="uid://jl0nl4a234bc" path="res://scripts/resources/resource_body_change.gd" id="16_askx4"]
[ext_resource type="Texture2D" uid="uid://0tlhci0f4sea" path="res://assets/reanim/SnowPea_blink2.png" id="17_6otjv"]
[ext_resource type="Animation" uid="uid://b46fv0d5ot0mh" path="res://animation/character/plant/006_snow_pea/SnowPea_head_idle.tres" id="20_d5rqr"]
[ext_resource type="Animation" uid="uid://dedyosdodpdq1" path="res://animation/character/plant/006_snow_pea/SnowPea_idle.tres" id="21_632lt"]
[ext_resource type="Animation" uid="uid://n4mysk55gq2q" path="res://animation/character/plant/006_snow_pea/SnowPea_shooting.tres" id="22_hkffs"]

[sub_resource type="Resource" id="Resource_a5mo6"]
script = ExtResource("16_askx4")
sprite_change = Array[NodePath]([NodePath("../Body/BodyCorrect/Anim_stem/stem_correct/Anim_blink")])
sprite_change_texture = Array[Texture2D]([ExtResource("15_t08fn"), ExtResource("17_6otjv")])
metadata/_custom_type_script = "uid://jl0nl4a234bc"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_wx2c3"]
_data = {
&"SnowPea_head_idle": ExtResource("20_d5rqr"),
&"SnowPea_idle": ExtResource("21_632lt"),
&"SnowPea_shooting": ExtResource("22_hkffs")
}

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_gw3lt"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0wq1v"]
animation = &"SnowPea_head_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ayn0h"]
animation = &"SnowPea_shooting"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_71cka"]
animation = &"SnowPea_idle"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_v32jt"]
sync = true
fadein_time = 0.3
fadeout_time = 0.3

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_uesk8"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_71cka"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_tv5fm"]
graph_offset = Vector2(-466.407, 93.8339)
nodes/output/position = Vector2(520, 160)
nodes/Add2/node = SubResource("AnimationNodeAdd2_gw3lt")
nodes/Add2/position = Vector2(160, 160)
nodes/Animation/node = SubResource("AnimationNodeAnimation_71cka")
nodes/Animation/position = Vector2(-140, 80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_0wq1v")
"nodes/Animation 2/position" = Vector2(-380, 280)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_ayn0h")
"nodes/Animation 3/position" = Vector2(-540, 480)
nodes/OneShot/node = SubResource("AnimationNodeOneShot_v32jt")
nodes/OneShot/position = Vector2(-100, 300)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_71cka")
nodes/TimeScale/position = Vector2(340, 160)
"nodes/TimeScale 2/node" = SubResource("AnimationNodeTimeScale_uesk8")
"nodes/TimeScale 2/position" = Vector2(-280, 480)
node_connections = [&"output", 0, &"TimeScale", &"Add2", 0, &"Animation", &"Add2", 1, &"OneShot", &"OneShot", 0, &"Animation 2", &"OneShot", 1, &"TimeScale 2", &"TimeScale", 0, &"Add2", &"TimeScale 2", 0, &"Animation 3"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_askx4"]
size = Vector2(800, 5)

[node name="Plant006SnowPea" node_paths=PackedStringArray("node2d_detect_in_slope") instance=ExtResource("1_ntefj")]
script = ExtResource("2_6otjv")
plant_type = 6
node2d_detect_in_slope = [NodePath("HurtBoxComponent/HurtBoxDetection"), NodePath("AttackComponent/DetectComponent")]

[node name="BodyCorrect" parent="Body" index="0"]
unique_name_in_owner = true
position = Vector2(-43, -69)

[node name="Backleaf" type="Sprite2D" parent="Body/BodyCorrect" index="0"]
position = Vector2(27.683748, 53.565014)
scale = Vector2(0.5669752, 0.5280496)
texture = ExtResource("2_askx4")
centered = false

[node name="Backleaf_left_tip" type="Sprite2D" parent="Body/BodyCorrect" index="1"]
position = Vector2(24.9, 54.232506)
rotation = 0.018871408
scale = Vector2(0.57646275, 0.53769976)
texture = ExtResource("3_6otjv")
centered = false

[node name="Backleaf_right_tip" type="Sprite2D" parent="Body/BodyCorrect" index="2"]
position = Vector2(47.332504, 53.432507)
rotation = 0.009578013
scale = Vector2(0.60373825, 0.53769976)
texture = ExtResource("4_a5mo6")
centered = false

[node name="Stalk_bottom" type="Sprite2D" parent="Body/BodyCorrect" index="3"]
position = Vector2(36.765015, 51.302483)
rotation = 0.077798866
scale = Vector2(0.5571625, 0.6273635)
skew = -0.025525616
texture = ExtResource("5_wtkom")
centered = false

[node name="Stalk_top" type="Sprite2D" parent="Body/BodyCorrect" index="4"]
position = Vector2(32.081264, 40.426178)
rotation = 0.071712695
scale = Vector2(0.557, 0.72251487)
skew = -0.028166058
texture = ExtResource("6_58ts4")
centered = false

[node name="Frontleaf" type="Sprite2D" parent="Body/BodyCorrect" index="5"]
position = Vector2(22.583748, 54.832504)
scale = Vector2(0.5634876, 0.54302484)
texture = ExtResource("7_5gv34")
centered = false

[node name="Frontleaf_right_tip" type="Sprite2D" parent="Body/BodyCorrect" index="6"]
position = Vector2(56.083744, 56.016254)
rotation = -0.0548699
scale = Vector2(0.6177134, 0.5516749)
texture = ExtResource("8_gq5lk")
centered = false

[node name="Frontleaf_tip_left" type="Sprite2D" parent="Body/BodyCorrect" index="7"]
position = Vector2(19.5, 61.267494)
rotation = 0.05227305
scale = Vector2(0.58195037, 0.5516749)
texture = ExtResource("9_a3ama")
centered = false

[node name="Anim_stem" type="Sprite2D" parent="Body/BodyCorrect" index="8"]
position = Vector2(38.34876, 45.223698)
centered = false

[node name="stem_correct" type="Node2D" parent="Body/BodyCorrect/Anim_stem" index="0"]
position = Vector2(-37.6, -48.7)

[node name="SnowPea_crystals1" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="0"]
position = Vector2(8.702481, 11.407444)
rotation = 0.0075721643
scale = Vector2(0.58760047, 0.55)
skew = -0.0075721643
texture = ExtResource("10_t2k0g")
centered = false

[node name="SnowPea_crystals2" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="1"]
position = Vector2(9.934988, 14.272456)
rotation = 0.0075721643
scale = Vector2(0.58443797, 0.53269976)
skew = -0.0075721643
texture = ExtResource("11_ljobm")
centered = false

[node name="SnowPea_crystals3" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="2"]
position = Vector2(7.7, 23.704962)
rotation = -0.07343392
scale = Vector2(0.55183744, 0.55)
skew = 0.07343392
texture = ExtResource("12_bg0v7")
centered = false

[node name="Anim_face" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="3"]
position = Vector2(19.316252, 14.43995)
scale = Vector2(0.555, 0.5485757)
texture = ExtResource("13_j0iub")
centered = false

[node name="SnowPea_mouth" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="4"]
position = Vector2(52.767494, 14.43995)
rotation = 0.0701598
scale = Vector2(0.5583499, 0.54606324)
skew = -0.0701598
texture = ExtResource("14_ncfxd")
centered = false

[node name="Idle_shoot_blink" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="5"]
visible = false
centered = false

[node name="Anim_blink" type="Sprite2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="6"]
visible = false
position = Vector2(37.857323, 20.990234)
scale = Vector2(0.555, 0.555)
texture = ExtResource("15_t08fn")
centered = false

[node name="Marker2DBullet" type="Marker2D" parent="Body/BodyCorrect/Anim_stem/stem_correct" index="7"]
unique_name_in_owner = true
position = Vector2(60.9452, 30.6411)

[node name="BlinkComponent" parent="." index="5"]
all_blink_body_change = Array[ExtResource("16_askx4")]([SubResource("Resource_a5mo6")])

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="8"]
active = false
libraries = {
&"": SubResource("AnimationLibrary_wx2c3")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="9"]
deterministic = false
tree_root = SubResource("AnimationNodeBlendTree_tv5fm")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")
parameters/Add2/add_amount = 1.0
parameters/OneShot/active = false
parameters/OneShot/internal_active = false
parameters/OneShot/request = 0
parameters/TimeScale/scale = 1.2
"parameters/TimeScale 2/scale" = 3.0

[node name="AttackComponent" type="Node2D" parent="." index="10" node_paths=PackedStringArray("markers_2d_bullet")]
script = ExtResource("3_4556a")
attack_bullet_type = 2
markers_2d_bullet = [NodePath("../Body/BodyCorrect/Anim_stem/stem_correct/Marker2DBullet")]

[node name="BulletAttackCdTimer" type="Timer" parent="AttackComponent" index="0"]
unique_name_in_owner = true

[node name="DetectComponent" type="Node2D" parent="AttackComponent" index="1"]
script = ExtResource("2_8jetj")

[node name="Area2D" type="Area2D" parent="AttackComponent/DetectComponent" index="0"]
position = Vector2(0, -25)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackComponent/DetectComponent/Area2D" index="0"]
position = Vector2(400, 0)
shape = SubResource("RectangleShape2D_askx4")

[connection signal="timeout" from="AttackComponent/BulletAttackCdTimer" to="AttackComponent" method="_on_bullet_attack_cd_timer_timeout"]
